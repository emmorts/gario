{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/buffercodec/index.js","src/client/js/app.js","src/client/js/graph.js","src/client/js/keyCode.js","src/client/js/models/index.js","src/client/js/models/player.js","src/client/js/polyfills.js","src/client/js/spells/Primary.js","src/client/js/spells/index.js","src/client/js/wsController.js","src/opCode.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7VA,OAAO,CAAC,aAAa,CAAC,CAAC;;AAEvB,IAAI,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AAC/B,IAAI,YAAY,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC7C,IAAI,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACnC,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACjC,IAAI,MAAM,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;;AAErC,CAAC,YAAY;;AAEX,MAAI,KAAK,CAAC;AACV,MAAI,EAAE,CAAC;AACP,MAAI,cAAc,CAAC;AACnB,MAAI,QAAQ,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;AACjC,MAAI,UAAU,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;AACnC,MAAI,KAAK,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;;AAE3B,MAAI,UAAU,GAAG,EAAE,CAAC;AACpB,MAAI,SAAS,GAAG,EAAE,CAAC;AACnB,MAAI,aAAa,GAAG,IAAI,CA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","file":"game.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","function BufferCodec(buffer) {\r\n  if (!(this instanceof BufferCodec)) {\r\n    return new BufferCodec(buffer);\r\n  }\r\n\r\n  this.offset = 0;\r\n  this.jobs = [];\r\n\r\n  if (buffer) {\r\n    if (buffer.byteLength > 0) {\r\n      if (buffer instanceof ArrayBuffer) {\r\n        this.buffer = buffer;\r\n      } else {\r\n        var arrayBuffer = new ArrayBuffer(buffer.length);\r\n        var view = new Uint8Array(arrayBuffer);\r\n        for (var i = 0; i < buffer.length; ++i) {\r\n          view[i] = buffer[i];\r\n        }\r\n        this.buffer = arrayBuffer;\r\n      }\r\n    }\r\n    if (!this.buffer) {\r\n      console.warn(\"Received malformed data\");\r\n    }\r\n  }\r\n}\r\n\r\nBufferCodec.prototype.result = function () {\r\n  this.offset = 0;\r\n  \r\n  var bufferLength = this.jobs.reduce(function(last, current) {\r\n    return last + current.length;\r\n  }, 0);\r\n  var buffer = new ArrayBuffer(bufferLength);\r\n  var dataView = new DataView(buffer);\r\n  \r\n  if (this.jobs.length > 0) {\r\n    this.jobs.forEach(function (job) {\r\n      if (job.method !== 'string') {\r\n        dataView[job.method](this.offset, job.data, job.littleEndian);\r\n        this.offset += job.length;\r\n      } else {\r\n        if (job.encoding === 'utf16') {\r\n          for (var i = 0; i < job.length / 2; i++, this.offset += 2) {\r\n            dataView.setUint16(this.offset, job.data.charCodeAt(i), true);\r\n          }\r\n        } else if (job.encoding === 'utf8') {\r\n          for (var i = 0; i < job.length; i++, this.offset++) {\r\n            dataView.setUint8(this.offset, job.data.charCodeAt(i));\r\n          }\r\n        } else {\r\n          console.warn('Undefined encoding: ' + job.encoding);\r\n        }\r\n      }\r\n    }, this);\r\n  }\r\n  \r\n  this.jobs = [];\r\n  \r\n  return dataView.buffer;\r\n}\r\n\r\nBufferCodec.prototype.string = function (value, encoding) {\r\n  this.jobs.push({\r\n    method: 'string',\r\n    data: value,\r\n    length: (!encoding || encoding === 'utf16') ? value.length * 2 : value.length,\r\n    encoding: encoding ? encoding : 'utf16'\r\n  });\r\n\r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.int8 = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setInt8',\r\n    length: 1\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.uint8 = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setUint8',\r\n    length: 1\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.int16le = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setInt16',\r\n    length: 2,\r\n    littleEndian: true\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.int16be = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setInt16',\r\n    length: 2,\r\n    littleEndian: false\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.uint16le = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setUint16',\r\n    length: 2,\r\n    littleEndian: true\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.uint16be = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setUint16',\r\n    length: 2,\r\n    littleEndian: false\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.int32le = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setInt32',\r\n    length: 4,\r\n    littleEndian: true\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.int32be = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setInt32',\r\n    length: 4,\r\n    littleEndian: false\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.uint32le = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setUint32',\r\n    length: 4,\r\n    littleEndian: true\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.uint32be = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setUint32',\r\n    length: 4,\r\n    littleEndian: false\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.float32le = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setFloat32',\r\n    length: 4,\r\n    littleEndian: true\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.float32be = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setFloat32',\r\n    length: 4,\r\n    littleEndian: false\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.float64le = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setFloat64',\r\n    length: 8,\r\n    littleEndian: true\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.float64be = function (value) {\r\n  this.jobs.push({\r\n    data: value,\r\n    method: 'setFloat64',\r\n    length: 8,\r\n    littleEndian: false\r\n  });\r\n  \r\n  return this;\r\n}\r\n\r\nBufferCodec.prototype.parse = function (template) {\r\n  if (this.buffer && template) {\r\n    var data = new DataView(this.buffer);\r\n    var result = {};\r\n\r\n    if (template.constructor === Array) {\r\n      template.forEach(function (element) {\r\n        parseItem.call(this, element, result)\r\n      }, this);\r\n    } else {\r\n      parseItem.call(this, template, result);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  function parseArray(data, template) {\r\n    var result = [];\r\n\r\n    var length = data.getUint8(this.offset++);\r\n    if (length > 0) {\r\n      for (var i = 0; i < length; i++) {\r\n        result.push(this.parse(template));\r\n      }\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  function parseItem(element) {\r\n    var templateResult;\r\n    switch (element.type) {\r\n      case 'int8':\r\n        templateResult = data.getInt8(this.offset);\r\n        this.offset += 1;\r\n        break;\r\n      case 'uint8':\r\n        templateResult = data.getUint8(this.offset);\r\n        this.offset += 1;\r\n        break;\r\n      case 'int16le':\r\n        templateResult = data.getInt16(this.offset, true);\r\n        this.offset += 2;\r\n        break;\r\n      case 'uint16le':\r\n        templateResult = data.getUint16(this.offset, true);\r\n        this.offset += 2;\r\n        break;\r\n      case 'int16be':\r\n        templateResult = data.getInt16(this.offset, false);\r\n        this.offset += 2;\r\n        break;\r\n      case 'uint16be':\r\n        templateResult = data.getUint16(this.offset, false);\r\n        this.offset += 2;\r\n        break;\r\n      case 'int32le':\r\n        templateResult = data.getInt32(this.offset, true);\r\n        this.offset += 4;\r\n        break;\r\n      case 'uint32le':\r\n        templateResult = data.getUint32(this.offset, true);\r\n        this.offset += 4;\r\n        break;\r\n      case 'int32be':\r\n        templateResult = data.getInt32(this.offset, false);\r\n        this.offset += 4;\r\n        break;\r\n      case 'uint32be':\r\n        templateResult = data.getUint32(this.offset, false);\r\n        this.offset += 4;\r\n        break;\r\n      case 'float32le':\r\n        templateResult = data.getFloat32(this.offset, true);\r\n        this.offset += 4;\r\n        break;\r\n      case 'float32be':\r\n        templateResult = data.getFloat32(this.offset, false);\r\n        this.offset += 4;\r\n        break;\r\n      case 'float64le':\r\n        templateResult = data.getFloat64(this.offset, true);\r\n        this.offset += 8;\r\n        break;\r\n      case 'float64be':\r\n        templateResult = data.getFloat64(this.offset, false);\r\n        this.offset += 8;\r\n        break;\r\n      case 'string':\r\n        if (typeof element.length === 'undefined') {\r\n          element.length = data.getUint8(this.offset++);\r\n        } else if (!element.length) {\r\n          templateResult = '';\r\n          break;\r\n        }\r\n        if (!element.encoding || element.encoding === 'utf16') {\r\n          var utf16 = new ArrayBuffer(element.length * 2);\r\n          var utf16view = new Uint16Array(utf16);\r\n          for (var i = 0; i < element.length; i++ , this.offset += 2) {\r\n            utf16view[i] = data.getUint8(this.offset);\r\n          }\r\n          templateResult = String.fromCharCode.apply(null, utf16view);\r\n        } else if (element.encoding === 'utf8') {\r\n          var utf8 = new ArrayBuffer(element.length);\r\n          var utf8view = new Uint8Array(utf8);\r\n          for (var i = 0; i < element.length; i++ , this.offset += 2) {\r\n            utf8view[i] = data.getUint8(this.offset);\r\n          }\r\n          templateResult = String.fromCharCode.apply(null, utf8view);\r\n        }\r\n        break;\r\n      case 'array':\r\n        templateResult = parseArray.call(this, data, element.itemTemplate);\r\n        break;\r\n    }\r\n\r\n    if (element.name) {\r\n      result[element.name] = templateResult;\r\n    } else {\r\n      result = templateResult;\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = BufferCodec;","require('./polyfills');\r\n\r\nvar Graph = require('./graph');\r\nvar WSController = require('./wsController');\r\nvar KeyCode = require('./keyCode');\r\nvar Models = require('./models');\r\nvar Spells = require('./spells');\r\nvar OPCode = require('../../opCode');\r\n\r\n(function () {\r\n  \r\n  var graph;\r\n  var ws;\r\n  var animLoopHandle;\r\n  var moveTick = performance.now();\r\n  var targetTick = performance.now();\r\n  var mouse = { x: 0, y: 0 };\r\n\r\n  var playerList = [];\r\n  var spellList = [];\r\n  var currentPlayer = null;\r\n\r\n  var canvasElements = document.getElementsByClassName('js-canvas');\r\n  if (canvasElements && canvasElements.length > 0) {\r\n    var canvas = canvasElements[0];\r\n    graph = new Graph(canvasElements[0]);\r\n  }\r\n\r\n  var playerNameElements = document.getElementsByClassName('js-player-name');\r\n  var playButtonElements = document.getElementsByClassName('js-play-button');\r\n  var errorElements = document.getElementsByClassName('js-error');\r\n  if (playerNameElements && playerNameElements.length > 0 &&\r\n      playButtonElements && playButtonElements.length > 0 &&\r\n      errorElements && errorElements.length > 0) {\r\n      var playerNameElement = playerNameElements[0];\r\n      var playButtonElement = playButtonElements[0];\r\n      var errorElement = errorElements[0];\r\n      playerNameElement.addEventListener('keyup', function validate(event) {\r\n        if (event && event.target) {\r\n          var pattern = /^[a-zA-Z0-9 ]{0,25}$/;\r\n          if (event.target.value.match(pattern)) {\r\n            errorElement.style.display = 'none';\r\n            playButtonElement.disabled = false;\r\n          } else {\r\n            errorElement.style.display = 'block';\r\n            playButtonElement.disabled = true;\r\n          }\r\n        }\r\n      });\r\n      playButtonElement.addEventListener('mouseup', startGame);\r\n  }\r\n\r\n  function animationLoop() {\r\n    animLoopHandle = window.requestAnimationFrame(animationLoop);\r\n    \r\n    gameLoop();\r\n  }\r\n\r\n  function gameLoop() {\r\n    graph\r\n      .clear()\r\n      .drawGrid()\r\n      // .drawBorder()\r\n      .drawArena()\r\n      .drawSpells(spellList)\r\n      .drawPlayers(playerList)\r\n      .drawDebug();\r\n    \r\n    playerList.forEach(player => player.calculateNextPosition());\r\n    spellList.forEach(spell => spell.calculateNextPosition());\r\n    \r\n\r\n    spellList.forEach((spell, spellIndex) => {\r\n      playerList.forEach(player => {\r\n        if (spell.ownerId !== player.ownerId) {\r\n          var distanceX = player.position.x - spell.position.x;\r\n          var distanceY = player.position.y - spell.position.y;\r\n          var distance = distanceX * distanceX + distanceY * distanceY;\r\n          if (distance < Math.pow(spell.radius + player.radius, 2)) {\r\n            spell.onCollision(player);\r\n            spellList.splice(spellIndex, 1);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  function startGame () {\r\n    var playerName = playerNameElement.value;\r\n    var startMenuElements = document.getElementsByClassName('js-start-menu');\r\n    if (startMenuElements && startMenuElements.length > 0) {\r\n      startMenuElements[0].style.display = 'none';\r\n    }\r\n    \r\n    ws = new WSController();\r\n\r\n    ws.on('open', function startGame() {\r\n      \r\n      canvas.addEventListener('mousemove', function (event) {\r\n        // mouse.x = -(graph.screenWidth / 2 - currentPlayer.position.x - event.x);\r\n        // mouse.y = -(graph.screenHeight / 2 - currentPlayer.position.y - event.y);\r\n        mouse.x = event.x;\r\n        mouse.y = event.y;\r\n        // console.log('screen', graph.screenWidth, graph.screenHeight);\r\n        // console.log('player', currentPlayer.position.x, currentPlayer.position.y);\r\n        // console.log('mouse', mouse.x, mouse.y);\r\n        // console.log('estimate', \r\n        //   graph.screenWidth / 2 - currentPlayer.position.x - mouse.x,\r\n        //   graph.screenHeight / 2 - currentPlayer.position.y - mouse.y);\r\n      });\r\n      \r\n      canvas.addEventListener('mousedown', function (event) {\r\n        if (currentPlayer && event.button === 2) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          var now = performance.now();\r\n          var diff = now - targetTick;\r\n          if (diff > 100) {\r\n            var targetX = mouse.x;\r\n            var targetY = mouse.y;\r\n            targetX = Math.min(Math.max(targetX, 0), graph._gameWidth);\r\n            targetY = Math.min(Math.max(targetY, 0), graph._gameHeight);\r\n            currentPlayer.setTarget(targetX, targetY);\r\n            targetTick = now;\r\n            ws.move(currentPlayer);\r\n          }\r\n        }\r\n      });\r\n      \r\n      canvas.addEventListener('keydown', function (event) {\r\n        switch (event.keyCode) {\r\n          case KeyCode.Q:\r\n            ws.cast(OPCode.CAST_PRIMARY, {\r\n              playerX: currentPlayer.position.x,\r\n              playerY: currentPlayer.position.y,\r\n              x: mouse.x,\r\n              y: mouse.y\r\n            });\r\n            break;\r\n        }\r\n      });\r\n      \r\n      canvas.addEventListener('contextmenu', function (event) {\r\n        event.preventDefault();\r\n      });\r\n      \r\n      ws.spawn(playerName);\r\n      \r\n      ws.on('addPlayer', function (node) {\r\n        currentPlayer = new Models.Player(node);\r\n        graph.player = currentPlayer;\r\n        playerList.push(currentPlayer);\r\n      });\r\n      \r\n      ws.on('updatePlayers', function (nodes) {\r\n        var updatedNodes = nodes.updatedNodes;\r\n        if (updatedNodes && updatedNodes.length > 0) {\r\n          updatedNodes.forEach(function (updatedNode) {\r\n            var found = playerList.filter(player=> player.id === updatedNode.id);\r\n            if (found.length === 0) {\r\n              var player = new Models.Player(updatedNode);\r\n              playerList.splice(0, 0, player);\r\n            } else {\r\n              found[0].setTarget(updatedNode.targetX, updatedNode.targetY);\r\n            }\r\n          });\r\n        }\r\n        \r\n        var destroyedNodes = nodes.destroyedNodes;\r\n        if (destroyedNodes && destroyedNodes.length > 0) {\r\n          destroyedNodes.forEach(function (destroyedNode) {\r\n            var index = -1;\r\n            for (var i = 0; i < playerList.length; i++) {\r\n              if (playerList[i].id === destroyedNode) {\r\n                index = i;\r\n              }\r\n            }\r\n            if (index !== -1) {\r\n              playerList.splice(index, 1);\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n      ws.on('updateSpells', function (spells) {\r\n        var updatedSpells = spells.updatedSpells;\r\n        if (updatedSpells && updatedSpells.length > 0) {\r\n          updatedSpells.forEach(function (updatedSpell) {\r\n            var SpellClass = Spells.get(updatedSpell.type);\r\n            var spell = new SpellClass(updatedSpell);\r\n            spellList.splice(0, 0, spell);\r\n          });\r\n        }\r\n        \r\n        var destroyedSpells = spells.destroyedSpells;\r\n        if (destroyedSpells && destroyedSpells.length > 0) {\r\n          destroyedSpells.forEach(function (destroyedSpell) {\r\n            var index = -1;\r\n            for (var i = 0; i < spellList.length; i++) {\r\n              if (spellList[i].id === destroyedSpell) {\r\n                index = i;\r\n              }\r\n            }\r\n            if (index !== -1) {\r\n              spellList.splice(index, 1);\r\n            }\r\n          });\r\n        }\r\n      });\r\n      \r\n    });\r\n    \r\n    if (!animLoopHandle) {\r\n      animationLoop();\r\n    }\r\n  }\r\n    \r\n})();","function Graph(canvas, options) {\r\n  this._canvas = canvas;\r\n  this._context = this._canvas.getContext('2d');\r\n\r\n  options = options || {};\r\n  this.screenWidth = this._canvas.width = options.screenWidth || getDefaultWidth();\r\n  this.screenHeight = this._canvas.height = options.screenHeight || getDefaultHeight();\r\n  this._borderColor = '#666';\r\n  this._gridColor = '#ececec';\r\n  this._globalAlpha = options.globalAlpha || 0.15;\r\n  this._gameWidth = this.screenWidth || 1000;\r\n  this._gameHeight = this.screenHeight || 1000;\r\n  this._arenaSize = 500;\r\n  this._xOffset = -this._gameWidth;\r\n  this._yOffset = -this._gameHeight;\r\n  \r\n  window.addEventListener('resize', onResize.bind(this));\r\n\r\n  this.player = {\r\n    id: -1,\r\n    position: {\r\n      x: this.screenWidth / 2,\r\n      y: this.screenHeight / 2\r\n    }\r\n  };\r\n\r\n  this._playerOptions = {\r\n    border: 6,\r\n    borderColor: '#CCCCCC',\r\n    textColor: '#FFFFFF',\r\n    textBorder: '#000000',\r\n    textBorderSize: 3,\r\n    fontSize: 12,\r\n    defaultSize: 30\r\n  };\r\n}\r\n\r\nGraph.prototype.clear = function () {\r\n  this._context.fillStyle = 'rgb(255, 255, 255)';\r\n  this._context.fillRect(0, 0, this.screenWidth, this.screenHeight);\r\n\r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawDebug = function () {\r\n  if (this.player.id !== -1) {\r\n    // COORDINATES\r\n    var posX = this.player.position.x;\r\n    var posY = this.player.position.y;\r\n    var coordinates = 'Coordinates: ' + Math.round(posX) + ' ' + Math.round(posY);\r\n    this.drawText(coordinates, 50, 50);\r\n    \r\n    // VELOCITY\r\n    var velocity = 'Velocity: ' + Math.round(this.player.velocity.x) + ' ' + Math.round(this.player.velocity.y);\r\n    this.drawText(velocity, 50, 30);\r\n  }\r\n  \r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawArena = function () {\r\n  this._context.lineWidth = 2;\r\n  this._context.strokeStyle = '#000';\r\n  this._context.beginPath();\r\n  \r\n  var startX = (this._gameWidth - this._arenaSize) / 2;\r\n  var startY = (this._gameHeight - this._arenaSize) / 2;\r\n  \r\n  this._context.moveTo(startX, startY);\r\n  this._context.lineTo(startX, startY + this._arenaSize);\r\n  this._context.lineTo(startX + this._arenaSize, startY + this._arenaSize);\r\n  this._context.lineTo(startX + this._arenaSize, startY);\r\n  this._context.lineTo(startX, startY);\r\n  \r\n  this._context.stroke();\r\n  \r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawGrid = function () {\r\n  this._context.lineWidth = 1;\r\n  this._context.strokeStyle = this._gridColor;\r\n  this._context.beginPath();\r\n\r\n  for (var x = this._xOffset; x < this.screenWidth; x += 40.5) {\r\n    x = Math.round(x) + 0.5;\r\n    this._context.moveTo(x, 0);\r\n    this._context.lineTo(x, this.screenHeight);\r\n  }\r\n\r\n  for (var y = this._yOffset; y < this.screenHeight; y += 40.5) {\r\n    x = Math.round(y) + 0.5;\r\n    this._context.moveTo(0, y);\r\n    this._context.lineTo(this.screenWidth, y);\r\n  }\r\n\r\n  this._context.stroke();\r\n\r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawCircle = function (centerX, centerY, radius, sides) {\r\n  var theta = 0;\r\n  var x = 0;\r\n  var y = 0;\r\n\r\n  this._context.beginPath();\r\n\r\n  for (var i = 0; i < sides; i++) {\r\n    theta = (i / sides) * 2 * Math.PI;\r\n    x = centerX + radius * Math.sin(theta);\r\n    y = centerY + radius * Math.cos(theta);\r\n    this._context.lineTo(x, y);\r\n  }\r\n\r\n  this._context.closePath();\r\n  this._context.stroke();\r\n  this._context.fill();\r\n\r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawBorder = function () {\r\n\r\n  this._context.lineWidth = 1;\r\n  this._context.strokeStyle = this._playerOptions.borderColor;\r\n\r\n  // Left-vertical.\r\n  if (this.player.position.x <= this.screenWidth / 2) {\r\n    this._context.beginPath();\r\n    this._context.moveTo(this.screenWidth / 2 - this.player.position.x, this.screenHeight / 2 - this.player.position.y);\r\n    this._context.lineTo(this.screenWidth / 2 - this.player.position.x, this._gameHeight + this.screenHeight / 2 - this.player.position.y);\r\n    this._context.strokeStyle = this._borderColor;\r\n    this._context.stroke();\r\n  }\r\n\r\n  // Top-horizontal.\r\n  if (this.player.position.y <= this.screenHeight / 2) {\r\n    this._context.beginPath();\r\n    this._context.moveTo(this.screenWidth / 2 - this.player.position.x, this.screenHeight / 2 - this.player.position.y);\r\n    this._context.lineTo(this._gameWidth + this.screenWidth / 2 - this.player.position.x, this.screenHeight / 2 - this.player.position.y);\r\n    this._context.strokeStyle = this._borderColor;\r\n    this._context.stroke();\r\n  }\r\n\r\n  // Right-vertical.\r\n  if (this._gameWidth - this.player.position.x <= this.screenWidth / 2) {\r\n    this._context.beginPath();\r\n    this._context.moveTo(this._gameWidth + this.screenWidth / 2 - this.player.position.x, this.screenHeight / 2 - this.player.position.y);\r\n    this._context.lineTo(this._gameWidth + this.screenWidth / 2 - this.player.position.x, this._gameHeight + this.screenHeight / 2 - this.player.position.y);\r\n    this._context.strokeStyle = this._borderColor;\r\n    this._context.stroke();\r\n  }\r\n\r\n  // Bottom-horizontal.\r\n  if (this._gameHeight - this.player.position.y <= this.screenHeight / 2) {\r\n    this._context.beginPath();\r\n    this._context.moveTo(this._gameWidth + this.screenWidth / 2 - this.player.position.x, this._gameHeight + this.screenHeight / 2 - this.player.position.y);\r\n    this._context.lineTo(this.screenWidth / 2 - this.player.position.x, this._gameHeight + this.screenHeight / 2 - this.player.position.y);\r\n    this._context.strokeStyle = this._borderColor;\r\n    this._context.stroke();\r\n  }\r\n  \r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawText = function (text, x, y, fontSize, hasStroke = true) {\r\n  if (typeof fontSize === 'undefined') {\r\n    fontSize = this._playerOptions.fontSize;\r\n  }\r\n  this._context.lineWidth = this._playerOptions.textBorderSize;\r\n  this._context.fillStyle = this._playerOptions.textColor;\r\n  this._context.strokeStyle = this._playerOptions.textBorder;\r\n  this._context.font = 'bold ' + fontSize + 'px sans-serif';\r\n  this._context.miterLimit = 1;\r\n  this._context.lineJoin = 'round';\r\n  this._context.textBaseline = 'middle';\r\n  if (hasStroke) {\r\n    this._context.strokeText(text, x, y);\r\n  }\r\n  this._context.fillText(text, x, y);\r\n}\r\n\r\nGraph.prototype.drawPlayer = function (player) {\r\n  var posX = player.position.x;\r\n  var posY = player.position.y;\r\n\r\n  this._context.beginPath();\r\n  this._context.arc(posX, posY, player.radius, Math.PI / 7 + player.rotation, -Math.PI / 7 + player.rotation);\r\n  this._context.fillStyle = getColorInRGB(player.color);\r\n  this._context.fill();\r\n  this._context.lineWidth = 6;\r\n  this._context.strokeStyle = getHealthColor(player.health, player.maxHealth);\r\n  this._context.stroke();\r\n  this._context.closePath();\r\n\r\n  this.drawText(player.name, posX, posY, 16);\r\n}\r\n\r\nGraph.prototype.drawPlayers = function (playerList) {\r\n  if (playerList.length > 0) {\r\n    var currentPlayer = playerList.find(player => player.id === this.player.id);\r\n    if (currentPlayer) {\r\n      this.player.position.x = currentPlayer.position.x;\r\n      this.player.position.y = currentPlayer.position.y;\r\n    }\r\n    playerList.forEach(player => this.drawPlayer(player));\r\n  }\r\n\r\n  return this;\r\n}\r\n\r\nGraph.prototype.drawSpells = function (spellList) {\r\n  if (spellList && spellList.length > 0) {\r\n    spellList.forEach(spell => drawSpell.call(this, spell));\r\n  }\r\n  \r\n  return this;\r\n}\r\n\r\nfunction drawSpell(spell) {\r\n  var posX = spell.position.x;\r\n  var posY = spell.position.y;\r\n  \r\n  this._context.beginPath();\r\n  this._context.arc(posX, posY, spell.radius, 0, 2 * Math.PI);\r\n  this._context.fillStyle = getColorInRGB(spell.color);\r\n  this._context.fill();\r\n  this._context.closePath();\r\n}\r\n\r\nfunction getColorInRGB(color, lightenPct) {\r\n  if (color) {\r\n    var r = color.r,\r\n      g = color.g,\r\n      b = color.b;\r\n    if (lightenPct) {\r\n      r = Math.round(r - r * lightenPct);\r\n      g = Math.round(g - g * lightenPct);\r\n      b = Math.round(b - b * lightenPct);\r\n    }\r\n    return 'rgb(' + r + ', ' + g + ', ' + b + ')';\r\n  }\r\n  return 'rgb(0, 0, 0)';\r\n}\r\n\r\nfunction getHealthColor(health, maxHealth) {\r\n  var hue = Math.floor((health / maxHealth) * 120);\r\n  \r\n  return 'hsl(' + hue + ', 100%, 50%)';\r\n}\r\n\r\nfunction onResize() {\r\n  this.screenWidth = this._canvas.width = getDefaultWidth();\r\n  this.screenHeight = this._canvas.height = getDefaultHeight();\r\n}\r\n\r\nfunction isValueInRange(min, max, value) {\r\n  return Math.min(max, Math.max(min, value));\r\n}\r\n\r\nfunction getDefaultWidth() {\r\n  return window.innerWidth && document.documentElement.clientWidth\r\n    ? Math.min(window.innerWidth, document.documentElement.clientWidth)\r\n    : window.innerWidth ||\r\n    document.documentElement.clientWidth ||\r\n    document.getElementsByTagName('body')[0].clientWidth;\r\n}\r\n\r\nfunction getDefaultHeight() {\r\n  return window.innerHeight && document.documentElement.clientHeight\r\n    ? Math.min(window.innerHeight, document.documentElement.clientHeight)\r\n    : window.innerHeight ||\r\n    document.documentElement.clientHeight ||\r\n    document.getElementsByTagName('body')[0].clientHeight;\r\n}\r\n\r\nmodule.exports = Graph;","module.exports = {\r\n  MAC_ENTER: 3,\r\n  BACKSPACE: 8,\r\n  TAB: 9,\r\n  NUM_CENTER: 12,\r\n  ENTER: 13,\r\n  SHIFT: 16,\r\n  CTRL: 17,\r\n  ALT: 18,\r\n  PAUSE: 19,\r\n  CAPS_LOCK: 20,\r\n  ESC: 27,\r\n  SPACE: 32,\r\n  PAGE_UP: 33,\r\n  PAGE_DOWN: 34,\r\n  END: 35,\r\n  HOME: 36,\r\n  LEFT: 37,\r\n  UP: 38,\r\n  RIGHT: 39,\r\n  DOWN: 40,\r\n  PRINT_SCREEN: 44,\r\n  INSERT: 45,\r\n  DELETE: 46,\r\n  ZERO: 48,\r\n  ONE: 49,\r\n  TWO: 50,\r\n  THREE: 51,\r\n  FOUR: 52,\r\n  FIVE: 53,\r\n  SIX: 54,\r\n  SEVEN: 55,\r\n  EIGHT: 56,\r\n  NINE: 57,\r\n  A: 65,\r\n  B: 66,\r\n  C: 67,\r\n  D: 68,\r\n  E: 69,\r\n  F: 70,\r\n  G: 71,\r\n  H: 72,\r\n  I: 73,\r\n  J: 74,\r\n  K: 75,\r\n  L: 76,\r\n  M: 77,\r\n  N: 78,\r\n  O: 79,\r\n  P: 80,\r\n  Q: 81,\r\n  R: 82,\r\n  S: 83,\r\n  T: 84,\r\n  U: 85,\r\n  V: 86,\r\n  W: 87,\r\n  X: 88,\r\n  Y: 89,\r\n  Z: 90,\r\n  META: 91,\r\n  CONTEXT_MENU: 93,\r\n  NUM_ZERO: 96,\r\n  NUM_ONE: 97,\r\n  NUM_TWO: 98,\r\n  NUM_THREE: 99,\r\n  NUM_FOUR: 100,\r\n  NUM_FIVE: 101,\r\n  NUM_SIX: 102,\r\n  NUM_SEVEN: 103,\r\n  NUM_EIGHT: 104,\r\n  NUM_NINE: 105,\r\n  NUM_MULTIPLY: 106,\r\n  NUM_PLUS: 107,\r\n  NUM_MINUS: 109,\r\n  NUM_PERIOD: 110,\r\n  NUM_DIVISION: 111,\r\n  F1: 112,\r\n  F2: 113,\r\n  F3: 114,\r\n  F4: 115,\r\n  F5: 116,\r\n  F6: 117,\r\n  F7: 118,\r\n  F8: 119,\r\n  F9: 120,\r\n  F10: 121,\r\n  F11: 122,\r\n  F12: 123\r\n};","module.exports = {\r\n  Player: require('./player.js')\r\n};","function Player(playerModel) {\r\n  playerModel = playerModel || {};\r\n  \r\n  this.id = playerModel.id || -1;\r\n  this.ownerId = playerModel.ownerId || -1;\r\n  this.name = playerModel.name;\r\n  this.health = playerModel.health;\r\n  this.maxHealth = playerModel.maxHealth;\r\n  this.speed = 4;\r\n  this.acceleration = 0.01;\r\n  this.rotation = 0;\r\n  this.targetRotation = 0;\r\n  this.radius = 30;\r\n  this.velocity = { x: 0, y: 0 };\r\n  this._baseFriction = 0.2;\r\n  this._baseRotationTicks = 10;\r\n  this.__rotationTicks = this._baseRotationTicks;\r\n  this.__friction = this._baseFriction;\r\n  \r\n  this.color = {\r\n    r: playerModel.r || 0,\r\n    g: playerModel.g | 0,\r\n    b: playerModel.b || 0\r\n  };\r\n  \r\n  this.position = {\r\n    x: playerModel.x || 0,\r\n    y: playerModel.y || 0\r\n  };\r\n  \r\n  this.target = {\r\n    x: playerModel.targetX || playerModel.x || 0,\r\n    y: playerModel.targetY || playerModel.y || 0\r\n  };\r\n}\r\n\r\nPlayer.prototype.calculateNextPosition = function () {\r\n  if (typeof this.target.x !== 'undefined' && typeof this.target.y !== 'undefined') {\r\n    calculatePosition.call(this);\r\n  }\r\n  if (typeof this.targetRotation !== 'undefined') {\r\n    calculateRotation.call(this);\r\n  }\r\n}\r\n\r\nPlayer.prototype.setTarget = function (x, y) {\r\n  this.targetRotation = Math.atan2(y - this.position.y, x - this.position.x);\r\n  var diff = Math.abs(this.targetRotation - this.rotation);\r\n  \r\n  if (diff > Math.PI / 2) {\r\n    this.__friction = this._baseFriction;\r\n  }\r\n  \r\n  this.target.x = x;\r\n  this.target.y = y;\r\n}\r\n\r\nmodule.exports = Player;\r\n\r\nfunction calculateRotation() {\r\n  if (Math.abs(this.rotation - this.targetRotation) > 1e-5) {\r\n    if (this.__rotationTicks > 0) {\r\n      if (this.rotation > Math.PI) {\r\n        this.rotation = -Math.PI - (Math.PI - Math.abs(this.rotation));\r\n      } else if (this.rotation < -Math.PI) {\r\n        this.rotation = Math.PI + (Math.PI - Math.abs(this.rotation));\r\n      }\r\n      if (Math.abs(this.targetRotation - this.rotation) > Math.PI) {\r\n        var diffA = Math.PI - Math.abs(this.rotation);\r\n        var diffB = Math.PI - Math.abs(this.targetRotation);\r\n        var diff = diffA + diffB;\r\n        if (this.rotation > 0) {\r\n          this.rotation += diff / this.__rotationTicks;\r\n        } else {\r\n          this.rotation -= diff / this.__rotationTicks;\r\n        }\r\n      } else {\r\n        this.rotation += (this.targetRotation - this.rotation) / this.__rotationTicks;\r\n      }\r\n    } else {\r\n      this.rotation = this.targetRotation;\r\n      this.__rotationTicks = 10\r\n    }\r\n  }\r\n}\r\n\r\nfunction calculatePosition() {\r\n  if (!arePositionsApproximatelyEqual(this.position, this.target)) {\r\n    if (this.__friction < 1) {\r\n      this.__friction += this.acceleration;\r\n    }\r\n    \r\n    var speed = this.speed * this.__friction;\r\n    var vX = this.target.x - this.position.x;\r\n    var vY = this.target.y - this.position.y;\r\n    var distance = getHypotenuseLength(vX, vY);\r\n    \r\n    var velX = (vX / distance) * speed;\r\n    var velY = (vY / distance) * speed;\r\n    \r\n    this.velocity = {\r\n      x: velX,\r\n      y: velY\r\n    };\r\n    \r\n    this.position = {\r\n      x: this.position.x + velX,\r\n      y: this.position.y + velY\r\n    };\r\n  } else {\r\n    this.__friction = this._baseFriction;\r\n    this.velocity = { x: 0, y: 0 };\r\n  }\r\n}\r\n\r\nfunction getHypotenuseLength(x, y) {\r\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n}\r\n\r\nfunction arePositionsApproximatelyEqual(positionA, positionB) {\r\n  var errorMargin = 5;\r\n  return (Math.abs(positionA.x - positionB.x) < errorMargin) && (Math.abs(positionA.y - positionB.y) < errorMargin);\r\n}\r\n","if (!Array.prototype.find) {\r\n  Array.prototype.find = function (predicate) {\r\n    if (this === null) {\r\n      throw new TypeError('Array.prototype.find called on null or undefined');\r\n    }\r\n    if (typeof predicate !== 'function') {\r\n      throw new TypeError('predicate must be a function');\r\n    }\r\n    var list = Object(this);\r\n    var length = list.length >>> 0;\r\n    var thisArg = arguments[1];\r\n    var value;\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      value = list[i];\r\n      if (predicate.call(thisArg, value, i, list)) {\r\n        return value;\r\n      }\r\n    }\r\n    return undefined;\r\n  };\r\n}\r\n\r\nif (!Date.now) {\r\n  Date.now = function () {\r\n    return new Date().getTime();\r\n  };\r\n}\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  var vendors = ['webkit', 'moz'];\r\n  for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {\r\n    var vp = vendors[i];\r\n    window.requestAnimationFrame = window[vp + 'RequestAnimationFrame'];\r\n    window.cancelAnimationFrame = (window[vp + 'CancelAnimationFrame']\r\n      || window[vp + 'CancelRequestAnimationFrame']);\r\n  }\r\n  if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) // iOS6 is buggy\r\n    || !window.requestAnimationFrame || !window.cancelAnimationFrame) {\r\n    var lastTime = 0;\r\n    window.requestAnimationFrame = function (callback) {\r\n      var now = Date.now();\r\n      var nextTime = Math.max(lastTime + 16, now);\r\n      return setTimeout(function () { callback(lastTime = nextTime); },\r\n        nextTime - now);\r\n    };\r\n    window.cancelAnimationFrame = clearTimeout;\r\n  }\r\n} ());","function Primary(spellModel) {\r\n  this.id = spellModel.id;\r\n  this.ownerId = spellModel.ownerId;\r\n  this.type = spellModel.type;\r\n  this.mass = spellModel.mass;\r\n  this.power = spellModel.power;\r\n  this.direction = { x: 0, y: 0 };\r\n  this.speed = 7;\r\n  this.radius = 10;\r\n  \r\n  this.position = {\r\n    x: spellModel.x,\r\n    y: spellModel.y\r\n  };\r\n  \r\n  this.color = {\r\n    r: spellModel.r,\r\n    g: spellModel.g,\r\n    b: spellModel.b,\r\n  };\r\n  \r\n  setTarget.call(this, spellModel.targetX, spellModel.targetY);\r\n}\r\n\r\nPrimary.prototype.calculateNextPosition = function () {\r\n  if (typeof this.direction.x !== 'undefined' && typeof this.direction.y !== 'undefined') {\r\n    calculatePosition.call(this);\r\n  }\r\n}\r\n\r\nPrimary.prototype.onCollision = function (model) {\r\n  model.health -= 10;\r\n}\r\n\r\nmodule.exports = Primary;\r\n\r\nfunction calculatePosition() {\r\n  this.position = {\r\n    x: this.position.x + this.direction.x * this.speed,\r\n    y: this.position.y + this.direction.y * this.speed\r\n  };\r\n}\r\n\r\nfunction getHypotenuseLength(x, y) {\r\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n}\r\n\r\nfunction setTarget(x, y) {\r\n  this.target = { x, y };\r\n  \r\n  var vX = this.target.x - this.position.x;\r\n  var vY = this.target.y - this.position.y;\r\n  var distance = getHypotenuseLength(vX, vY);\r\n  \r\n  this.direction = {\r\n    x: vX / distance,\r\n    y: vY / distance\r\n  };\r\n}","var OPCode = require('../../../opCode');\r\n\r\nmodule.exports = {\r\n  Primary: require('./Primary')\r\n}\r\n\r\nmodule.exports.get = function (code) {\r\n  var spell = null;\r\n  \r\n  switch (code) {\r\n    case OPCode.SPELL_PRIMARY:\r\n      spell = module.exports.Primary;\r\n      break;\r\n  }\r\n  \r\n  return spell;\r\n}","var BufferCodec = require('buffercodec');\r\nvar OPCode = require('../../opCode')\r\n\r\nfunction WSController() {\r\n  this.__uri = 'ws://localhost:3000';\r\n  this.__acknoledged = false;\r\n  this.__socket = null;\r\n  this.__eventHandlers = [];\r\n\r\n  setupSocket.call(this);\r\n}\r\n\r\nWSController.prototype.spawn = function (playerName) {\r\n  var buffer = BufferCodec()\r\n    .uint8(OPCode.SPAWN_PLAYER)\r\n    .uint8(playerName.length)\r\n    .string(playerName)\r\n    .result();\r\n  this.__socket.send(buffer);\r\n}\r\n\r\nWSController.prototype.move = function (player) {\r\n  var buffer = BufferCodec()\r\n    .uint8(OPCode.PLAYER_MOVE)\r\n    .uint16le(player.target.x)\r\n    .uint16le(player.target.y)\r\n    .result();\r\n\r\n  this.__socket.send(buffer);\r\n}\r\n\r\nWSController.prototype.cast = function (opcode, options) {\r\n  var buffer = BufferCodec()\r\n    .uint8(opcode)\r\n    .uint16le(options.playerX)\r\n    .uint16le(options.playerY)\r\n    .uint16le(options.x)\r\n    .uint16le(options.y)\r\n    .result();\r\n\r\n  this.__socket.send(buffer);\r\n}\r\n\r\nWSController.prototype.on = function (name, listener) {\r\n  if (!(name in this.__eventHandlers) || !(this.__eventHandlers[name] instanceof Array)) {\r\n    this.__eventHandlers[name] = [];\r\n  }\r\n  this.__eventHandlers[name].push(listener);\r\n}\r\n\r\nfunction fire(name, options) {\r\n  if (name in this.__eventHandlers && this.__eventHandlers[name].length > 0) {\r\n    this.__eventHandlers[name].forEach(handler => handler(options));\r\n  }\r\n}\r\n\r\nfunction setupSocket() {\r\n  this.__socket = new WebSocket(this.__uri);\r\n  this.__socket.binaryType = 'arraybuffer';\r\n\r\n  this.__socket.onopen = function (event) {\r\n    fire.call(this, 'open');\r\n\r\n    this.__socket.onmessage = function handleMessage(message) {\r\n      var codec = BufferCodec(message.data);\r\n      var code = codec.parse({ type: 'uint8' });\r\n\r\n      switch (code) {\r\n        case OPCode.ADD_PLAYER:\r\n          var node = codec.parse([{\r\n              name: 'id',\r\n              length: 32,\r\n              type: 'string'\r\n            }, {\r\n              name: 'ownerId',\r\n              length: 32,\r\n              type: 'string'\r\n            }, {\r\n              name: 'name',\r\n              type: 'string'\r\n            }, {\r\n              name: 'health',\r\n              type: 'uint16le'\r\n            }, {\r\n              name: 'maxHealth',\r\n              type: 'uint16le'\r\n            }, {\r\n              name: 'x',\r\n              type: 'float32le'\r\n            }, {\r\n              name: 'y',\r\n              type: 'float32le'\r\n            }, {\r\n              name: 'r',\r\n              type: 'uint8'\r\n            }, {\r\n              name: 'g',\r\n              type: 'uint8'\r\n            }, {\r\n              name: 'b',\r\n              type: 'uint8'\r\n            }]);\r\n          fire.call(this, 'addPlayer', node);\r\n          break;\r\n        case OPCode.UPDATE_PLAYERS:\r\n          var updatedNodes = codec.parse({\r\n            type: 'array',\r\n            itemTemplate: [{\r\n                name: 'id',\r\n                length: 32,\r\n                type: 'string'\r\n              }, {\r\n                name: 'ownerId',\r\n                length: 32,\r\n                type: 'string'\r\n              }, {\r\n                name: 'name',\r\n                type: 'string'\r\n              }, {\r\n                name: 'health',\r\n                type: 'uint16le'\r\n              }, {\r\n                name: 'maxHealth',\r\n                type: 'uint16le'\r\n              }, {\r\n                name: 'x',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'y',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'targetX',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'targetY',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'r',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'g',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'b',\r\n                type: 'uint8'\r\n              }]\r\n          });\r\n          var destroyedNodes = codec.parse({\r\n            type: 'array',\r\n            itemTemplate: { type: 'string', length: 32 }\r\n          });\r\n          fire.call(this, 'updatePlayers', {\r\n            destroyedNodes: destroyedNodes,\r\n            updatedNodes: updatedNodes\r\n          });\r\n          break;\r\n        case OPCode.UPDATE_SPELLS:\r\n          var updatedSpells = codec.parse({\r\n            type: 'array',\r\n            itemTemplate: [{\r\n                name: 'id',\r\n                length: 32,\r\n                type: 'string'\r\n              }, {\r\n                name: 'ownerId',\r\n                length: 32,\r\n                type: 'string'\r\n              }, {\r\n                name: 'type',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'mass',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'power',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'x',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'y',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'targetX',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'targetY',\r\n                type: 'float32le'\r\n              }, {\r\n                name: 'r',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'g',\r\n                type: 'uint8'\r\n              }, {\r\n                name: 'b',\r\n                type: 'uint8'\r\n              }]\r\n          });\r\n          var destroyedSpells = codec.parse({\r\n            type: 'array',\r\n            itemTemplate: { type: 'string', length: 32 }\r\n          });\r\n          fire.call(this, 'updateSpells', {\r\n            destroyedSpells: destroyedSpells,\r\n            updatedSpells: updatedSpells\r\n          });\r\n          break;\r\n        default:\r\n          console.warn(\"Undefined opcode\");\r\n          break;\r\n      }\r\n    }.bind(this)\r\n  }.bind(this)\r\n}\r\n\r\nmodule.exports = WSController;","module.exports = {\n  // actions\n  \"PING\": 0x01,\n  \"PONG\": 0x02,\n  \"SPAWN_PLAYER\": 0x03,\n  \"ADD_PLAYER\": 0x04,\n  \"UPDATE_PLAYERS\": 0x05,\n  \"UPDATE_SPELLS\": 0x06,\n  \"PLAYER_MOVE\": 0x07,\n  \n  // cast\n  \"CAST_PRIMARY\": 0x08,\n  \n  // types\n  \"SPELL_PRIMARY\": 0x0A\n};"]}